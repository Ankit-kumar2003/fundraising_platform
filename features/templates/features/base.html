{% load static %}
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Together for Our Village{% endblock %}</title>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    {% block extra_head %}{% endblock %}
</head>

<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100">

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="{% url 'features:home' %}" class="text-2xl font-bold text-green-700">Together for Our Village</a>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="{% url 'features:home' %}" class="text-gray-600 hover:text-green-600">Home</a>
                <a href="{% url 'features:about' %}" class="text-gray-600 hover:text-green-600">About</a>
                <a href="{% url 'features:project_list' %}" class="text-gray-600 hover:text-green-600">Projects</a>
                <a href="{% url 'features:gallery' %}" class="text-gray-600 hover:text-green-600">Gallery</a>
                <a href="{% url 'features:fund_usage' %}" class="text-gray-600 hover:text-green-600">Transparency</a>
                <a href="{% url 'features:contact' %}" class="text-gray-600 hover:text-green-600">Contact</a>
            </div>
            <div class="hidden md:flex items-center space-x-4">
                <button id="theme-toggle"
                    class="mr-4 p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition"
                    aria-label="Toggle dark mode">
                    <!-- Sun icon (light mode) -->
                    <svg id="icon-sun" class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor"
                        stroke-width="2" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="5" />
                        <path
                            d="M12 1v2m0 18v2m11-11h-2M3 12H1m16.95 6.95l-1.414-1.414M6.464 6.464L5.05 5.05m12.02 0l-1.414 1.414M6.464 17.536l-1.414 1.414" />
                    </svg>
                    <!-- Moon icon (dark mode) -->
                    <svg id="icon-moon" class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor"
                        stroke-width="2" viewBox="0 0 24 24">
                        <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" />
                    </svg>
                </button>
                {% if user.is_authenticated %}
                <a href="{% url 'features:donor_profile' %}" class="text-gray-600 hover:text-green-600">Profile</a>
                <form method="post" action="{% url 'logout' %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit"
                        class="bg-red-500 text-white py-2 px-4 rounded-full hover:bg-red-600">Logout</button>
                </form>
                {% else %}
                <a href="{% url 'login' %}" class="text-gray-600 hover:text-green-600">Login</a>
                <a href="{% url 'register' %}"
                    class="bg-green-600 text-white py-2 px-4 rounded-full hover:bg-green-700">Register</a>
                {% endif %}
            </div>
            <!-- Mobile Menu Button -->
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-600 hover:text-green-600 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-white">
            <a href="{% url 'features:home' %}" class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Home</a>
            <a href="{% url 'features:about' %}"
                class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">About</a>
            <a href="{% url 'features:project_list' %}"
                class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Projects</a>
            <a href="{% url 'features:gallery' %}"
                class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Gallery</a>
            <a href="{% url 'features:fund_usage' %}"
                class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Transparency</a>
            <a href="{% url 'features:contact' %}"
                class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Contact</a>
            {% if user.is_authenticated %}
            <a href="{% url 'features:donor_profile' %}"
                class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Profile</a>
            <form method="post" action="{% url 'logout' %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="block py-2 px-4 text-sm text-red-500 hover:bg-gray-100">Logout</button>
            </form>
            {% else %}
            <a href="{% url 'login' %}" class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Login</a>
            <a href="{% url 'register' %}" class="block py-2 px-4 text-sm text-green-600 hover:bg-gray-100">Register</a>
            {% endif %}
        </div>
    </header>

    <main>
        {% if messages %}
        <div class="container mx-auto px-6 mt-4">
            {% for message in messages %}
            <div class="p-4 mb-4 text-sm rounded-lg {% if message.tags == 'success' %}bg-green-100 text-green-800{% else %}bg-red-100 text-red-800{% endif %}"
                role="alert">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-6 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-2">Together for Our Village</h3>
                    <p class="text-gray-400 mb-4">Proudly created by villagers, for villagers.</p>
                    <p class="text-sm text-gray-500 mb-4">Our mission: Empowering our rural community through
                        transparent, community-funded projects in education, health, and infrastructure.</p>
                    <!-- Placeholder for QR Code -->
                    <div class="mt-4">
                        <p class="font-semibold">Donate via UPI:</p>
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=your-upi-id@okhdfcbank"
                            alt="Donation QR Code" class="w-32 h-32 bg-white p-1 rounded-md mt-2">
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-2">Quick Links</h3>
                    <ul class="text-gray-400">
                        <li class="mb-2"><a href="{% url 'features:about' %}" class="hover:text-white">About Us</a></li>
                        <li class="mb-2"><a href="{% url 'features:project_list' %}"
                                class="hover:text-white">Projects</a></li>
                        <li class="mb-2"><a href="{% url 'features:fund_usage' %}"
                                class="hover:text-white">Transparency</a></li>
                        <li class="mb-2"><a href="{% url 'features:faq' %}" class="hover:text-white">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-2">Contact Us</h3>
                    <ul class="text-gray-400">
                        <li class="mb-2">Email: <a href="mailto:contact@village.com"
                                class="hover:text-white">contact@village.com</a></li>
                        <li class="mb-2">WhatsApp: <a href="https://wa.me/911234567890" class="hover:text-white">+91 123
                                456 7890</a></li>
                        <li class="flex space-x-4 mt-4">
                            <a href="#" class="hover:text-white" aria-label="Facebook">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M22.675 0h-21.35C.6 0 0 .6 0 1.326v21.348C0 23.4.6 24 1.326 24H12.82v-9.294H9.692v-3.622h3.127V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.4 24 24 23.4 24 22.674V1.326C24 .6 23.4 0 22.675 0">
                                    </path>
                                </svg>
                            </a>
                            <a href="#" class="hover:text-white" aria-label="Instagram">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.334 3.608 1.308.974.974 1.246 2.241 1.308 3.608.058 1.266.069 1.646.069 4.85s-.012 3.584-.07 4.85c-.062 1.366-.334 2.633-1.308 3.608-.974.974-2.241 1.246-3.608 1.308-1.266.058-1.646.069-4.85.069s-3.584-.012-4.85-.07c-1.366-.062-2.633-.334-3.608-1.308-.974-.974-1.246-2.241-1.308-3.608C2.175 15.747 2.163 15.367 2.163 12s.012-3.584.07-4.85c.062-1.366.334-2.633 1.308-3.608C4.515 2.497 5.782 2.225 7.148 2.163 8.414 2.105 8.794 2.163 12 2.163zm0-2.163C8.741 0 8.332.012 7.052.07 5.771.128 4.659.334 3.608 1.385 2.557 2.436 2.351 3.548 2.293 4.829 2.235 6.109 2.223 6.518 2.223 12c0 5.482.012 5.891.07 7.171.058 1.281.264 2.393 1.315 3.444 1.051 1.051 2.163 1.257 3.444 1.315C8.332 23.988 8.741 24 12 24s3.668-.012 4.948-.07c1.281-.058 2.393-.264 3.444-1.315 1.051-1.051 1.257-2.163 1.315-3.444.058-1.28.07-1.689.07-7.171 0-5.482-.012-5.891-.07-7.171-.058-1.281-.264-2.393-1.315-3.444C19.341.334 18.229.128 16.948.07 15.668.012 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z">
                                    </path>
                                </svg>
                            </a>
                            <a href="https://wa.me/911234567890" class="hover:text-white" aria-label="WhatsApp">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M20.52 3.48A11.93 11.93 0 0 0 12 0C5.37 0 0 5.37 0 12c0 2.11.55 4.16 1.6 5.97L0 24l6.18-1.62A11.94 11.94 0 0 0 12 24c6.63 0 12-5.37 12-12 0-3.19-1.24-6.19-3.48-8.52zM12 22c-1.85 0-3.68-.5-5.25-1.44l-.37-.22-3.67.96.98-3.58-.24-.37C2.5 15.68 2 13.85 2 12 2 6.48 6.48 2 12 2c2.21 0 4.29.86 5.87 2.43A8.23 8.23 0 0 1 22 12c0 5.52-4.48 10-10 10zm5.13-7.47c-.28-.14-1.65-.81-1.9-.9-.25-.09-.43-.14-.61.14-.18.28-.28-.7.9-.86 1.08-.16.18-.32.2-.6.07-.28-.14-1.18-.44-2.25-1.41-.83-.74-1.39-1.65-1.55-1.93-.16-.28-.02-.43.12-.57.13-.13.28-.34.42-.51.14-.17.18-.29.28-.48.09-.19.05-.36-.02-.5-.07-.14-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.47-.16-.01-.35-.01-.54-.01-.19 0-.5.07-.76.34-.26.27-1 1-1 2.43 0 1.43 1.03 2.81 1.18 3.01.15.2 2.03 3.1 4.93 4.23.69.3 1.23.48 1.65.61.69.22 1.32.19 1.82.12.56-.08 1.65-.67 1.88-1.32.23-.65.23-1.2.16-1.32-.07-.12-.25-.19-.53-.33z">
                                    </path>
                                </svg>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-700 pt-6 text-center text-gray-500">
                &copy; {% now "Y" %} Together for Our Village. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Dark/Light mode toggle
        document.addEventListener('DOMContentLoaded', function () {
            var themeToggle = document.getElementById('theme-toggle');
            var htmlEl = document.documentElement;

            // Set initial theme
            if (localStorage.getItem('theme') === 'dark' ||
                (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                htmlEl.classList.add('dark');
            } else {
                htmlEl.classList.remove('dark');
            }

            // Toggle on click
            if (themeToggle) {
                themeToggle.onclick = function () {
                    htmlEl.classList.toggle('dark');
                    if (htmlEl.classList.contains('dark')) {
                        localStorage.setItem('theme', 'dark');
                    } else {
                        localStorage.setItem('theme', 'light');
                    }
                }
            }
        });
    </script>
    <script src="{% static 'js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>