{% extends 'features/base.html' %}
{% block title %}Fund Usage & Transparency | Together for Our Village{% endblock %}

{% block content %}
<div class="container mx-auto px-6 mb-12">
    <h2 class="text-2xl font-bold text-green-700 mb-4">Recent Donations</h2>
    <div class="overflow-x-auto rounded-lg shadow">
        <table class="min-w-full bg-white text-left text-gray-700">
            <thead class="bg-green-100">
                <tr>
                    <th class="py-3 px-4">Date</th>
                    <th class="py-3 px-4">Name</th>
                    <th class="py-3 px-4">Amount (₹)</th>
                    <th class="py-3 px-4">Campaign</th>
                    <th class="py-3 px-4">Message</th>
                </tr>
            </thead>
            <tbody>
                {% for donation in donations %}
                <tr class="border-b">
                    <td class="py-2 px-4">{{ donation.donation_date|date:"d M Y" }}</td>
                    <td class="py-2 px-4">
                        {% if donation.anonymous %}
                        Anonymous
                        {% else %}
                        {{ donation.donor.full_name }}
                        {% endif %}
                    </td>
                    <td class="py-2 px-4">{{ donation.amount }}</td>
                    <td class="py-2 px-4">{{ donation.campaign.title }}</td>
                    <td class="py-2 px-4">{{ donation.message|default:"-" }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center py-4">No donations yet.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="container mx-auto px-6 mb-12">
    <h2 class="text-2xl font-bold text-green-700 mb-4">Fund Allocation & Expenses</h2>
    <div class="overflow-x-auto rounded-lg shadow">
        <table class="min-w-full bg-white text-left text-gray-700">
            <thead class="bg-green-100">
                <tr>
                    <th class="py-3 px-4">Date</th>
                    <th class="py-3 px-4">Campaign</th>
                    <th class="py-3 px-4">Title</th>
                    <th class="py-3 px-4">Description</th>
                    <th class="py-3 px-4">Amount (₹)</th>
                    <th class="py-3 px-4">Bill/Photo</th>
                </tr>
            </thead>
            <tbody>
                {% for expense in expenses %}
                <tr class="border-b">
                    <td class="py-2 px-4">{{ expense.date|date:"d M Y" }}</td>
                    <td class="py-2 px-4">{{ expense.campaign.title }}</td>
                    <td class="py-2 px-4">{{ expense.title }}</td>
                    <td class="py-2 px-4">{{ expense.description|truncatewords:10 }}</td>
                    <td class="py-2 px-4">{{ expense.amount }}</td>
                    <td class="py-2 px-4">
                        {% if expense.receipt %}
                        <a href="{{ expense.receipt.url }}" target="_blank" class="text-green-700 underline">View</a>
                        {% else %}
                        -
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center py-4">No expenses recorded yet.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="container mx-auto px-6">
    <h2 class="text-2xl font-bold text-green-700 mb-4">Visual Summary</h2>
    <div class="bg-green-50 border-l-4 border-green-600 p-8 rounded text-center text-gray-700">
        <p>Charts and graphs coming soon!</p>
    </div>
</div>
{% endblock %}